const functions = require("firebase-functions"); const admin = require("firebase-admin"); const nodemailer = require("nodemailer"); admin.initializeApp(); // Настройки за Gmail (използвай App Password) const transporter = nodemailer.createTransport({ service: "gmail", auth: { user: "your@gmail.com", pass: "your_app_password" } }); // Известие при нова задача exports.notifyNewTodo = functions.firestore .document("todos/{todoId}") .onCreate(async (snap, context) => { const data = snap.data(); const mailOptions = { from: "your@gmail.com", to: "admin@example.com", subject: "Нова задача е създадена", text: `Потребител ${data.createdByEmail} създаде нова задача:\n\n${data.text}` }; await transporter.sendMail(mailOptions); return true; });
